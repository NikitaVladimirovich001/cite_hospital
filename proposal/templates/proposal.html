{% extends 'root.html' %}
{% load static %}

{% block title %}
    <title>Заявка</title>
{% endblock %}

{% block content %}
    <div class="container mt-5">
        <center><h2>Форма заявки</h2></center>

        <h4>Ваши данные:</h4>
        <p>Имя: {{ user.name }}</p>
        <p>Фамилия: {{ user.surname }}</p>
        <p>Отчество: {{ user.patronymic }}</p>
        <p>Email: {{ user.email }}</p>

        <h3>Доступное время записи:</h3>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {% for slot in time_slots %}
                {% if slot in busy_times %}
                    <!-- Этот временной слот уже занят, поэтому не рендерим кнопку -->
                    <p>{{ slot|date:'Y-m-d H:i' }} - Занято</p>
                {% else %}
                    <button class="btn btn-success btn-time-slot" type="submit" name="selected_time" value="{{ slot|date:'Y-m-d H:i' }}">{{ slot|date:'Y-m-d H:i' }}</button>
                {% endif %}
            {% endfor %}
        </form>
    </div>
{% endblock %}